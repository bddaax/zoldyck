{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Zoldyck</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
<div class="overflow-x-hidden px-4 md:px-8 pb-8 pt-24 min-h-screen bg-gray-100 flex flex-col">
    <!-- Full-width card_info -->
    <div class="p-2 mb-6 relative">
        <!-- This will pull in your card_info.html template (full width) -->
        <div class="relative z-30 w-full">
            {% include "card_info.html" %}
        </div>
    </div>

    <!-- Add New Product Button -->
    <div class="flex justify-center mb-6">
        <a href="{% url 'main:create_product_form' %}" class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-md shadow-md flex items-center space-x-2">
            <span class="text-lg">Add New Product</span>
            <span class="text-lg font-bold">+</span>
        </a>
    </div>

    {% if not services %}
    <div class="flex flex-col items-center justify-center min-h-[24rem] p-6">
        <img src="{% static 'image/zoldyck-family.png' %}" alt="Sad face" class="w-32 h-32 mb-4"/>
        <p class="text-center text-gray-600 mt-4">Belum ada jasa pada Zoldyck Detective Services.</p>
    </div>
    {% else %}
    <!-- Only card_product is inside grid with 2 columns -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {% for product in services %}
        {% include "card_product.html" %}
        {% endfor %}
    </div>
    {% endif %}

    <!-- Last Login Section (Moved to Bottom) -->
    <div class="px-3 mb-4 mt-8">
        <div class="flex items-center justify-center bg-gray-200 py-2 px-4 rounded-md shadow-md">
            <h1 class="text-gray-800 font-semibold text-lg">Last Login: {{ last_login }}</h1>
        </div>
    </div>

    <!-- Copyright Section -->
    <div class="text-center mt-6 text-gray-600">
        <p>Â© 2024 Brenda Po Lok Fahida 2306152304 Pemrograman Berbasis Platform D</p>
    </div>
</div>

<script>
    const carousel = document.getElementById('carousel');
    const totalSlides = document.querySelectorAll('.min-w-[70%]').length;
    const slideWidth = document.querySelector('.min-w-[70%]').offsetWidth + 16; // Width + margin

    let currentIndex = 0;

    function updateCarousel() {
        const offset = -currentIndex * slideWidth;
        carousel.style.transform = `translateX(${offset}px)`;
    }

    document.getElementById('next').addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % totalSlides;
        updateCarousel();
    });

    document.getElementById('prev').addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
        updateCarousel();
    });
</script>

{% endblock content %}
